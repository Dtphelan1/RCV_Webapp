(this["webpackJsonprcv-webapp"]=this["webpackJsonprcv-webapp"]||[]).push([[0],{159:function(e,t,a){},208:function(e,t,a){},239:function(e,t,a){},255:function(e,t){},379:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(48),c=a.n(s),r=(a(239),a(95)),o=a(19),l=a(407),d=a(403),m=a(16),u=a(24),p=a(397),h=a(392),b=a(207),j=a(410),f=a(390),v=a(391),x=a(2);var g=function(e){var t=e.onClick;return Object(x.jsxs)(f.a,{onClick:t,variant:"light",className:"btn mr-0 ml-1 mt-2 d-flex justify-content-center align-items-center",children:[Object(x.jsx)(v.a,{size:18,className:"mr-1"}),"Reset"]})};var O=function(e){e.dataid;var t=e.fullWidth,a=e.handleChange,n=e.helperText,i=e.label,s=e.max,c=(e.maxVariable,e.min),r=e.padding,o=void 0===r||r,l=e.step,d=void 0===l?1:l,m=e.value,u=t?" col-12 ":" col-sm-6 ",p=o?" pr-2 pl-2 ":"p-0";return Object(x.jsxs)("div",{className:"".concat(p," ").concat(u),children:[Object(x.jsx)("label",{className:"input-label",children:i}),Object(x.jsx)("input",{type:"number",onChange:function(e){return a(e.target.value)},value:m,step:d,min:c,max:s}),Object(x.jsx)("span",{className:"d-block input-helper-text",children:n})]})};a(159);var y=function(e){var t=e.dataid,a=e.fullWidth,n=e.handleChange,i=(e.id,e.label),s=e.options,c=e.padding,r=void 0===c||c,o=(e.type,e.value),l=a?" col-12 ":" col-sm-6 ",d=r?" pr-2 pl-2 ":"p-0";return Object(x.jsxs)("div",{className:"".concat(d," ").concat(l),children:[Object(x.jsx)("div",{className:"input-label pb-1",children:i}),s.map((function(e){return Object(x.jsxs)("div",{className:"pb-1",children:[Object(x.jsx)("input",{type:"radio",id:e.id,name:t,onChange:function(e){return n(e.target.value)},value:e.value,checked:e.value===parseInt(o),className:"d-inline"}),Object(x.jsx)("label",{htmlFor:e.id,className:"radio-option-text",children:e.label})]},e.id)}))]})},k=a(402);var C=function(e){var t=e.dataid,a=e.fullWidth,n=e.handleChange,i=(e.id,e.label),s=e.options,c=e.padding,r=void 0===c||c,o=e.value,l=a?" col-12 ":" col-sm-6 ",d=r?" pr-2 pl-2 ":"p-0";return Object(x.jsxs)("div",{className:"".concat(d," ").concat(l),children:[Object(x.jsx)("div",{className:"input-label pb-1",children:i}),s.map((function(e){return Object(x.jsxs)("div",{className:"pb-1",children:[Object(x.jsx)(k.a.Check,{custom:!0,type:"checkbox",id:e.id,name:t,onChange:function(e){return n(e.target.value)},value:e.value,checked:o.includes(e.value),className:"d-inline"}),Object(x.jsx)("label",{htmlFor:e.id,className:"checkbox-option-text",children:e.label})]},e.id)}))]})},w=a(77),N={primary:"rgb(192, 140, 51)",primaryEmph:"rgb(220, 185, 125)",majColor:"rgb(75, 148, 96)",minColor:"rgb(75, 63, 114)"};function M(e){var t=e.minColorFirst,a=e.value,n=e.min,i=e.max,s=e.step,c=e.onChange,r=e.labelFormat;return console.log("variables",N),Object(x.jsx)(w.Range,{onChange:function(e){return c(e[0])},values:[a],min:n,max:i,step:s,renderTrack:function(e){var s=e.props,c=e.children;return Object(x.jsx)("div",Object(m.a)(Object(m.a)({},s),{},{className:"slider-track",style:Object(m.a)(Object(m.a)({},s.style),{},{background:Object(w.getTrackBackground)({values:[a],colors:t?[N.minColor,N.majColor]:[N.majColor,N.minColor],min:n,max:i})}),children:c}))},renderThumb:function(e){var t=e.props,a=e.isDragged;return Object(x.jsx)("div",Object(m.a)(Object(m.a)({},t),{},{className:"slider-thumb",children:a&&Object(x.jsx)("div",{className:"slider-tooltip",children:r()})}))}})}var A=function(e){e.className;var t=e.minColorFirst,a=e.fullWidth,n=e.handleChange,i=(e.id,e.label),s=e.leftLabel,c=e.rightLabel,r=e.max,o=e.min,l=e.padding,d=void 0===l||l,m=e.step,u=void 0===m?1:m,p=e.value,h=a?" col-12 ":" col-sm-6 ",b=d?" pr-2 pl-2 ":"p-0";return Object(x.jsxs)("div",{className:"".concat(b," ").concat(h),children:[Object(x.jsx)("label",{className:"input-label w-75",children:i}),Object(x.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("input",{className:"input-value",onChange:function(e){return n(e.target.value)},type:"number",value:p,min:o,max:r,step:u}),Object(x.jsx)("span",{className:"pl-3 pr-3 w-100",children:Object(x.jsx)(M,{minColorFirst:t,value:Number(p),min:o,max:r,step:u,labelFormat:function(){return"".concat(Number(p),"% - ").concat(r-Number(p),"%")},onChange:function(e){return n(e)}})}),Object(x.jsx)("input",{className:"input-value text-right",onChange:function(e){return n(r-e.target.value)},type:"number",value:r-p,min:o,max:r,step:u})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsx)("div",{className:"text-left",children:Object(x.jsx)("label",{className:"d-block input-helper-text mr-1 mb-0",children:s})}),Object(x.jsx)("div",{className:"text-right",children:Object(x.jsx)("label",{className:"d-block input-helper-text ml-1  mb-0",children:c})})]})]})},T=a(20),E=a.n(T),S=a(208),V=a.n(S);var R=function(e){e.dataid;var t=e.fullWidth,a=e.handleChange,n=(e.helperText,e.id,e.label),i=e.max,s=e.maxLabel,c=e.min,r=e.minLabel,o=e.padding,l=void 0===o||o,d=e.step,u=void 0===d?1:d,p=e.value,h=E.a.range(c,i+u,u),b=t?" col-12 ":" col-sm-6 ",j=l?" pr-2 pl-2 ":"p-0";return Object(x.jsxs)("div",{className:"".concat(j," ").concat(b),children:[Object(x.jsx)("label",{className:"input-label",children:n}),Object(x.jsxs)("div",{className:"d-flex mb-2 justify-content-between",children:[Object(x.jsx)("span",{className:"input-helper-text align-self-center mr-1 text-left",children:r}),Object(x.jsx)("span",{className:"input-helper-text align-self-center ml-1 text-right",children:s})]}),Object(x.jsx)(w.Range,{onChange:function(e){return a(e[0])},values:[p],min:c,max:i,step:u,marks:h,renderTrack:function(e){var t=e.props,a=e.children;return Object(x.jsx)("div",Object(m.a)(Object(m.a)({},t),{},{className:"slider-track",style:Object(m.a)(Object(m.a)({},t.style),{},{background:Object(w.getTrackBackground)({values:[p],colors:[V.a.primary,"#ccc"],min:c,max:i})}),children:a}))},renderThumb:function(e){var t=e.props;return Object(x.jsx)("div",Object(m.a)(Object(m.a)({},t),{},{className:"slider-thumb"}))},renderMark:function(e){var t=e.props;return Object(x.jsx)("div",Object(m.a)(Object(m.a)({},t),{},{className:"ticked_mark"}))}})]})};var D=function(e){var t=e.param,a=e.formData,n=e.setFormData,i=(e.formInputs,function(e){return function(t){var i=e.updateTransform||function(e){return e},s=Object(m.a)({},a);s[e.dataid]=i(t,e.dataid,s),n(s)}});switch(t.type){case"number":return Object(x.jsx)(O,Object(m.a)(Object(m.a)({},t),{},{max:t.maxVariable?a[t.maxVariable]:t.max,handleChange:i(t),value:a[t.dataid]}));case"split-slider":return Object(x.jsx)(A,Object(m.a)(Object(m.a)({},t),{},{handleChange:i(t),value:a[t.dataid]}));case"ticked-slider":return Object(x.jsx)(R,Object(m.a)(Object(m.a)({},t),{},{handleChange:i(t),value:a[t.dataid]}));case"radio":return Object(x.jsx)(y,Object(m.a)(Object(m.a)({},t),{},{handleChange:i(t),value:a[t.dataid],formData:a}));case"checkbox":return Object(x.jsx)(C,Object(m.a)(Object(m.a)({},t),{},{handleChange:i(t),value:a[t.dataid],formData:a}));default:return console.warn("Seeing a new kind of parameter type: ".concat(t.type)),null}};function F(e){var t=e.formTitle,a=e.formData,n=e.formInputs,i=e.setFormData,s=e.resetData;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)("h1",{children:t}),Object(x.jsx)(g,{onClick:s})]}),Object(x.jsx)(j.a,{className:"parameter-container",children:Object(x.jsx)(h.a,{as:j.a.Body,noGutters:!0,className:"align-content-start",children:n.map((function(e){return Object(x.jsx)(D,{param:e,formData:a,setFormData:i},e.id)}))})})]})}var L=i.a.memo(F),P=a(78),B=a.n(P),I=a(209),z=a(210),G=a.n(z),_=a(211),W=a.n(_);var H=function(){return Object(x.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(x.jsx)("div",{className:"spinner-border",style:{height:75,width:75,marginTop:-75},role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"Loading..."})})})},Y=a(212),J=a(213),Z=a(230),q=a(229),U="Green",$="Purple";var K=function(e){var t=e.title,a=e.options,n=e.setValue;return Object(x.jsxs)(k.a.Group,{controlId:"exampleForm.SelectCustom",children:[Object(x.jsx)(k.a.Label,{children:t}),Object(x.jsx)(k.a.Control,{as:"select",onChange:n,children:a.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.display},e.id)}))})]})},Q=a(393),X=a(66);var ee=function(){return Object(x.jsx)("p",{children:"Nothing to display here"})};function te(e){var t=e.kv,a=void 0===t?{}:t;return 0===Object.keys(a).length?Object(x.jsx)(ee,{}):Object(x.jsx)(Q.a,{striped:!0,borderless:!0,className:"kv-table",children:Object(x.jsx)("tbody",{children:Object.entries(a).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"table-key",children:a}),Object(x.jsx)("td",{className:"table-value",children:n})]},a)}))})})}function ae(e){var t=e.data,a=void 0===t?[]:t,n=e.maxSeats,i=void 0===n?1:n,s=!E.a.isEmpty(a)&&{Min:Object(X.min)(a),Max:Object(X.max)(a),Mode:Object(X.modeFast)(a),Mean:Object(X.mean)(a).toFixed(2),"Standard Deviation":Object(X.standardDeviation)(a).toFixed(2)},c=!E.a.isEmpty(s)&&{Min:(s.Min/i).toFixed(2),Max:(s.Max/i).toFixed(2),Mode:(s.Mode/i).toFixed(2),Mean:(s.Mean/i).toFixed(2),"Standard Deviation":(s["Standard Deviation"]/i).toFixed(2)},r=!E.a.isEmpty(c)&&{Min:"".concat((100*c.Min).toFixed(0),"% of seats (").concat(s.Min," / ").concat(i,")"),Max:"".concat((100*c.Max).toFixed(0),"% of seats (").concat(s.Max," / ").concat(i,")"),Mode:"".concat((100*c.Mode).toFixed(0),"% of seats (").concat(s.Mode," / ").concat(i,")"),Mean:"".concat((100*c.Mean).toFixed(0),"% of seats (").concat(s.Mean," / ").concat(i,")"),"Standard Deviation":"".concat(100*c["Standard Deviation"],"% (").concat(s["Standard Deviation"]," / ").concat(i,")")};return Object(x.jsx)(h.a,{className:"m-0",children:Object(x.jsxs)(b.a,{sm:12,className:"pr-1 pl-1",children:[Object(x.jsx)("h5",{className:"stats-table-title",children:Object(x.jsx)("span",{className:"literal-title",children:"Statistics"})}),Object(x.jsx)(te,{kv:r})]})})}var ne=i.a.memo(ae),ie=a(405),se=a(411),ce=a(408),re=a(400),oe=a(414),le=a(406),de=a(412);var me=function(e){var t=e.displayMajResults,a=e.maxSeats,n=void 0===a?0:a,i=e.selectedModel,s=e.data,c=(s||[]).map((function(e){return{x:e}})),r=E.a.range(0,n+2,1),o=t?N.majColor:N.minColor,l=t?U:$,d=E.a.isEmpty(s)?void 0:Object(X.mean)(s);return Object(x.jsxs)(ie.a,{style:{parent:{fontSize:12}},containerComponent:Object(x.jsx)(se.a,{className:"pt-2 pb-4",style:{height:350,maxWidth:450,margin:"auto",maxHeight:"600"}}),children:[Object(x.jsx)(ce.a,{text:E.a.isEmpty(s)?"No Data":"".concat(l," Candidates Elected \n Across ").concat(s.length," ").concat(i," Simulation(s) "),x:225,y:18,textAnchor:"middle"}),Object(x.jsx)(re.a,{style:{labels:{fill:"black"},data:{fill:o}},cornerRadius:0,data:c,bins:r,labelComponent:Object(x.jsx)(oe.a,{constrainToVisibleArea:!0}),labels:function(e){var t=e.datum;return"# Elections with ".concat(t.x-.5,"\n ").concat(l," candidate(s) elected:\n").concat(t.y)}}),d>=0&&Object(x.jsx)(le.a,{style:{data:{stroke:N.primaryEmph,strokeDasharray:"5"}},x:function(){return d+.01}}),Object(x.jsx)(de.a,{label:"Frequency of outcome",textAnchor:"middle",axisLabelComponent:Object(x.jsx)(ce.a,{dy:-12}),dependentAxis:!0}),Object(x.jsx)(de.a,{label:"Number of ".concat(l," candidates elected\n (mean represented as dashed line)"),tickLabelComponent:Object(x.jsx)(ce.a,{dy:-5}),tickValues:r.slice(0,r.length)})]})},ue=[{id:"all",display:"All models",getPocElected:function(e){return e.poc_elected_rcv}},{id:"pl",display:"Plackett-Luce",getPocElected:function(e){return e.ac_poc_elected_rcv}},{id:"bt",display:"Bradley-Terry",getPocElected:function(e){return e.bt_poc_elected_rcv}},{id:"ac",display:"Alternating Crossover",getPocElected:function(e){return e.pl_poc_elected_rcv}},{id:"cs",display:"Cambridge Sampler",getPocElected:function(e){return e.cs_poc_elected_rcv}}],pe=function(e){Object(Z.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(Y.a)(this,a),(n=t.call(this,e)).toggleMajResults=function(){n.setState({displayMajResults:!n.state.displayMajResults})},n.state={displayMajResults:!1,dataToVisualize:ue[0]},n}return Object(J.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return t.dataToVisualize!==this.state.dataToVisualize||e.simulationResults!==this.props.simulationResults||t.displayMajResults!==this.state.displayMajResults}},{key:"render",value:function(){var e=this,t=this.props,a=t.selectedModel,n=void 0===a?"":a,i=t.simulationParams,s=void 0===i?{}:i,c=t.simulationResults,r=void 0===c?{}:c,o=E.a.isEmpty(r)?void 0:this.state.dataToVisualize.getPocElected(r),l=r.seats_open,d=this.state.displayMajResults?o.map((function(e){return l-e})):o,m=this.state.displayMajResults?$:U;return Object(x.jsxs)("section",{children:[!E.a.isEmpty(r)&&Object(x.jsx)(k.a.Check,{type:"switch",id:"custom-switch",className:"results-demographic-flip mt-0",value:this.state.displayMajResults,onChange:this.toggleMajResults,label:"View ".concat(m," results")}),!E.a.isEmpty(r)&&Object(x.jsx)(K,{title:"Models included in results",value:this.state.dataToVisualize,setValue:function(t){var a=t.target.value;e.setState({dataToVisualize:ue.find((function(e){return e.id===a}))})},options:ue}),Object(x.jsx)(me,{maxSeats:l,displayMajResults:this.state.displayMajResults,data:d,selectedModel:n}),Object(x.jsx)(ne,{data:d,maxSeats:l,simulationParams:s})]})}}]),a}(i.a.Component),he=a(394),be=a(226);var je=function(e){var t=e.refToSave;return Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsxs)(f.a,{onClick:function(){Object(be.exportComponentAsPNG)(t)},className:"d-flex justify-content-center align-items-center",size:"sm",children:[Object(x.jsx)(he.a,{size:16,className:"mr-1"}),"Save"]})})},fe=a(395);var ve=function(e){var t=e.onClick;return Object(x.jsxs)(f.a,{onClick:t,className:"d-flex ml-1 justify-content-center align-items-center",size:"sm",children:[Object(x.jsx)(fe.a,{size:16,className:"mr-1"}),"Run"]})},xe=a(396);var ge=function(){return Object(x.jsxs)(f.a,{className:"d-flex ml-1 justify-content-center align-items-center",size:"sm",disabled:!0,children:[Object(x.jsx)(xe.a,{size:16,className:"mr-1"}),"Loading..."]})},Oe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(n.useState)("idle"),i=Object(u.a)(a,2),s=i[0],c=i[1],r=Object(n.useState)(null),o=Object(u.a)(r,2),l=o[0],d=o[1],m=Object(n.useState)(null),p=Object(u.a)(m,2),h=p[0],b=p[1],j=Object(n.useCallback)((function(){return c("pending"),d(null),b(null),e().then((function(e){d(e),c("success")})).catch((function(e){b(e),c("error")}))}),[e]);return Object(n.useEffect)((function(){t&&j()}),[j,t]),{execute:j,status:s,value:l,error:h}},ye=[{id:"plackettLuce",dataid:"plackettLuce",display:"Plackett-Luce",apiEndpoint:"plackettLuce"},{id:"bradleyTerry",dataid:"bradleyTerry",display:"Bradley-Terry",apiEndpoint:"bradleyTerry"},{id:"alternatingCrossover",dataid:"alternatingCrossover",display:"Alternating Crossover",apiEndpoint:"alternatingCrossover"},{id:"cambridgeSampler",dataid:"cambridgeSampler",display:"Cambridge Sampler",apiEndpoint:"cambridgeSampler"}];"Among ".concat(U," voters, support for ").concat(U," candidates is..."),"Among ".concat(U," voters, support for ").concat($," candidates is..."),"Among ".concat($," voters, support for ").concat($," candidates is..."),"Among ".concat($," voters, support for ").concat(U," candidates is..."),"Among ".concat(U," voters, does everyone tend to rank ").concat(U," candidates the same way?"),"Yes, ".concat(U," voters tend to rank ").concat(U," candidates the same way"),"No, ".concat(U," voters tend to rank ").concat(U," candidates randomly"),"Among ".concat(U," voters, does everyone tend to rank ").concat($," candidates the same way?"),"Yes, ".concat(U," voters tend to rank ").concat($," candidates the same way"),"No, ".concat(U," voters tend to rank ").concat($," candidates randomly"),"Among ".concat($," voters, does everyone tend to rank ").concat(U," candidates the same way?"),"Yes, ".concat($," voters tend to rank ").concat(U," candidates the same way"),"No, ".concat($," voters tend to rank ").concat(U," candidates randomly"),"Among ".concat($," voters, does everyone tend to rank ").concat($," candidates the same way?"),"Yes, ".concat($," voters tend to rank ").concat($," candidates the same way"),"No, ".concat($," voters tend to rank ").concat($," candidates randomly");function ke(e){return ye.find((function(t){return t.display===e}))}function Ce(e){var t=e.appRef,a=e.combineFormData,n=e.formData,i=e.formInputs,s=e.setFormData,c=e.selectedModel,r="https://rcv-api.herokuapp.com/api/v1/"+function(e){return e?ke(e).apiEndpoint:"ensemble"}(c),o=function(e,t){if(!t)return e;var a=ke(t).dataid;return E.a.pick(e,Object.keys(e).filter((function(e){var t=e.split("-"),n=Boolean(t[1]);return!n||n&&t[1]===a})))}(a(),c||void 0),l=Oe(function(){var e=Object(I.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.get(r,{params:o,paramsSerializer:function(e){return G.a.stringify(e,{arrayFormat:"repeat"})}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),!1),d=l.execute,m=l.status,u=l.value,p=l.error;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsx)("h1",{children:"Simulations"})}),Object(x.jsx)(j.a,{className:"parameter-container",children:Object(x.jsxs)(j.a.Body,{children:[Object(x.jsx)(h.a,{noGutters:!0,className:"align-content-start",children:i.map((function(e){return Object(x.jsx)(D,{param:e,formData:n,setFormData:s},e.id)}))}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsx)("h4",{children:"Election Results"}),Object(x.jsxs)("div",{className:"d-flex",children:["success"===m&&Object(x.jsx)(je,{refToSave:t}),"pending"!==m?Object(x.jsx)(ve,{onClick:d}):Object(x.jsx)(ge,{})]})]}),"error"===m&&Object(x.jsxs)("p",{children:["There was an error processing those simulations.",console.error(p)]}),"pending"===m&&Object(x.jsx)("div",{className:"d-flex flex-column w-100",children:Object(x.jsx)("div",{style:{height:"300px"},children:Object(x.jsx)(H,{})})}),"idle"===m&&Object(x.jsx)(pe,{}),"success"===m&&Object(x.jsx)(pe,{simulationResults:u,simulationParams:o,selectedModel:c})]})]})})]})}var we=i.a.memo(Ce),Ne=[{id:"ballots",dataid:"ballots",initialValue:1e3},{id:"seatsOpen",dataid:"seatsOpen",initialValue:5},{id:"majCandidates",dataid:"majCandidates",initialValue:6},{id:"minCandidates",dataid:"minCandidates",initialValue:6}],Me=[{id:"ballots",dataid:"ballots",type:"number",step:10,min:0,max:1e4,label:"Ballots cast",helperText:"Max 10,000",info:"The number of voters in each election simulation"},{id:"seatsOpen",dataid:"seatsOpen",type:"number",step:1,min:0,max:20,label:"Seats open for election",helperText:"Max 20",info:"The number of open seats open for election in each simulation"},{id:"majCandidates",dataid:"majCandidates",type:"number",step:1,min:0,max:15,helperText:"Max 15",label:"".concat(U," candidates"),info:"The number of ".concat(U," candidates running for election in each simulation")},{id:"minCandidates",dataid:"minCandidates",type:"number",step:1,min:0,max:15,helperText:"Max 15",label:"".concat($," candidates"),info:"The number of ".concat($," candidates running for election in each simulation")}],Ae=[{id:"popMajParty",dataid:"popMajParty",initialValue:70},{id:"percentageMajCohesion",dataid:"percentageMajCohesion",initialValue:70},{id:"percentageMinCohesion",dataid:"percentageMinCohesion",initialValue:70},{id:"majMajCandidateAgreement",dataid:"majMajCandidateAgreement",initialValue:1},{id:"majMinCandidateAgreement",dataid:"majMinCandidateAgreement",initialValue:1},{id:"minMinCandidateAgreement",dataid:"minMinCandidateAgreement",initialValue:1},{id:"minMajCandidateAgreement",dataid:"minMajCandidateAgreement",initialValue:1}],Te=[{id:"popMajParty",dataid:"popMajParty",type:"split-slider",fullWidth:!0,step:1,min:0,max:100,leftLabel:"Percent ".concat(U),rightLabel:"Percent ".concat($),label:"Percentage of population that is ".concat(U," vs ").concat($),info:"Assuming all members of the population vote for either ".concat(U,"\n    or ").concat($,", which percentage votes for ").concat(U,"\n    ")},{id:"percentageMajCohesion",dataid:"percentageMajCohesion",type:"split-slider",fullWidth:!0,step:1,min:0,max:100,leftLabel:"".concat(U," cohesion"),rightLabel:"".concat(U," crossover"),label:"".concat(U," voter cohesion and crossover"),helperText:"Max 100%"},{id:"percentageMinCohesion",dataid:"percentageMinCohesion",type:"split-slider",minColorFirst:!0,fullWidth:!0,step:1,min:0,max:100,leftLabel:"".concat($," cohesion"),rightLabel:"".concat($," crossover"),label:"".concat($," voters cohesion and crossover"),helperText:"Max 100%"},{id:"majMajCandidateAgreement",dataid:"majMajCandidateAgreement",type:"radio",label:"Among ".concat(U," voters, does everyone tend to rank ").concat(U," candidates the same way?"),options:[{id:"uniform-majMajCandidateAgreement",value:1,label:"Yes, ".concat(U," voters tend to rank ").concat(U," candidates the same way")},{id:"random-majMajCandidateAgreement",value:0,label:"No, ".concat(U," voters tend to rank ").concat(U," candidates randomly")}]},{id:"majMinCandidateAgreement",dataid:"majMinCandidateAgreement",type:"radio",label:"Among ".concat(U," voters, does everyone tend to rank ").concat($," candidates the same way?"),options:[{id:"uniform-majMinCandidateAgreement",value:1,label:"Yes, ".concat(U," voters tend to rank ").concat($," candidates the same way")},{id:"random-majMinCandidateAgreement",value:0,label:"No, ".concat(U," voters tend to rank ").concat($," candidates randomly")}]},{id:"minMajCandidateAgreement",dataid:"minMajCandidateAgreement",type:"radio",label:"Among ".concat($," voters, does everyone tend to rank ").concat(U," candidates the same way?"),options:[{id:"uniform-minMajCandidateAgreement",value:1,label:"Yes, ".concat($," voters tend to rank ").concat(U," candidates the same way")},{id:"random-minMajCandidateAgreement",value:0,label:"No, ".concat($," voters tend to rank ").concat(U," candidates randomly")}]},{id:"minMinCandidateAgreement",dataid:"minMinCandidateAgreement",type:"radio",label:"Among ".concat($," voters, does everyone tend to rank ").concat($," candidates the same way?"),options:[{id:"uniform-minMinCandidateAgreement",value:1,label:"Yes, ".concat($," voters tend to rank ").concat($," candidates the same way")},{id:"random-minMinCandidateAgreement",value:0,label:"No, ".concat($," voters tend to rank ").concat($," candidates randomly")}]}],Ee=Object.freeze({pl:0,bt:1,ac:2,cs:3}),Se=[{id:"numElectionsEachSimulation",dataid:"numElectionsEachSimulation",initialValue:1},{id:"modelsToSimulate",dataid:"modelsToSimulate",initialValue:Object.values(Ee)}],Ve=[{id:"numElectionsEachSimulation",dataid:"numElectionsEachSimulation",type:"number",min:1,max:4,label:"Elections to simulate, per model",helperText:"Max 4",info:"The number of elections to simulate with these parameters"},{id:"modelsToSimulate",dataid:"modelsToSimulate",type:"checkbox",label:"RCV models to use",updateTransform:function(e,t,a){var n=parseInt(e),i=a[t];return i.includes(n)?i.filter((function(e){return e!==n})):(i.push(n),i)},options:[{id:"pl",value:Ee.pl,label:"Plackett-Luce"},{id:"bt",value:Ee.bt,label:"Bradley-Terry"},{id:"ac",value:Ee.ac,label:"Alternating Crossover"},{id:"cs",value:Ee.cs,label:"Cambridge Sampler"}]}];var Re=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);if(E.a.isNull(a))return t;var n=JSON.parse(a),i=Object.keys(t),s=Object.keys(n);return E.a.isEqual(s,i)?n:(window.localStorage.removeItem(e),t)}catch(c){return console.log(c),t}})),i=Object(u.a)(a,2),s=i[0],c=i[1];return[s,function(t){try{var a=t instanceof Function?t(s):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.error(n)}}]};var De,Fe,Le=function(){var e=Object(n.useRef)(),t=Ne.reduce((function(e,t){return e[t.dataid]=t.initialValue,e}),{}),a=Re("electionState",t),i=Object(u.a)(a,2),s=i[0],c=i[1],r=Ae.reduce((function(e,t){return e[t.dataid]=t.initialValue,e}),{}),o=Re("voterState",r),l=Object(u.a)(o,2),d=l[0],j=l[1],f=Se.reduce((function(e,t){return e[t.dataid]=t.initialValue,e}),{}),v=Re("simulationState",f),g=Object(u.a)(v,2),O=g[0],y=g[1];return Object(x.jsx)(p.a,{fluid:!0,ref:e,children:Object(x.jsxs)(h.a,{children:[Object(x.jsxs)(b.a,{md:7,className:"pb-2 d-flex flex-column",children:[Object(x.jsx)(L,{formTitle:"Election Details",formInputs:Me,formData:s,setFormData:c,resetData:function(){return c(t)}}),Object(x.jsx)(L,{formTitle:"Voter Behaviors",formInputs:Te,formData:d,setFormData:j,resetData:function(){return j(r)}})]}),Object(x.jsx)(b.a,{md:5,className:"pb-2 d-flex flex-column",children:Object(x.jsx)(we,{appRef:e,combineFormData:function(){return Object(m.a)(Object(m.a)(Object(m.a)({},s),d),O)},formData:O,formInputs:Ve,setFormData:y})})]})})},Pe=a(399),Be=a(398),Ie=a.p+"static/media/ac.03835d34.png",ze=a.p+"static/media/cs.ff9c2349.png",Ge=a.p+"static/media/pl-bt.1f22c059.png";function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function We(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function He(e,t){var a=e.title,i=e.titleId,s=We(e,["title","titleId"]);return n.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 682 146.35",ref:t,"aria-labelledby":i},s),De||(De=n.createElement("defs",null,n.createElement("style",null,".cls-1{isolation:isolate;}.cls-2{fill:#0099cd;}.cls-3,.cls-4{fill:#010101;}.cls-3{mix-blend-mode:darken;}"))),void 0===a?n.createElement("title",{id:i},"Artboard 1"):a?n.createElement("title",{id:i},a):null,Fe||(Fe=n.createElement("g",{className:"cls-1"},n.createElement("g",{id:"Layer_1","data-name":"Layer 1"},n.createElement("path",{className:"cls-2",d:"M227.19,30.36l59.35,42.81L308.91,3.51a73.17,73.17,0,0,0-81.43,112.87l59.06-43.21Z"}),n.createElement("path",{className:"cls-3",d:"M359.7,72.92l-73.16.25,22.84,69.52L286.54,73.17l-59.06,43.21A73.16,73.16,0,0,0,359.7,72.92Z"}),n.createElement("path",{className:"cls-2",d:"M388.34,30.36l59.35,42.81L470.06,3.51a73.17,73.17,0,0,0-81.43,112.87l59.06-43.21Z"}),n.createElement("path",{className:"cls-3",d:"M520.85,72.92l-73.16.25,22.84,69.52L447.69,73.17l-59.06,43.21A73.16,73.16,0,0,0,520.85,72.92Z"}),n.createElement("path",{className:"cls-2",d:"M549.49,30.36l59.35,42.81L631.21,3.51a73.17,73.17,0,0,0-81.43,112.87l59.06-43.21Z"}),n.createElement("path",{className:"cls-3",d:"M682,72.92l-73.16.25,22.84,69.52L608.84,73.17l-59.06,43.21A73.16,73.16,0,0,0,682,72.92Z"}),n.createElement("polygon",{className:"cls-2",points:"73.18 0 0 146.35 73.18 146.35 109.77 73.18 73.18 0"}),n.createElement("polygon",{className:"cls-2",points:"146.35 0 109.77 73.18 146.35 146.35 219.53 146.35 146.35 0"}),n.createElement("polygon",{className:"cls-4",points:"73.18 146.35 146.35 146.35 109.77 73.18 73.18 146.35"}),n.createElement("polygon",{className:"cls-3",points:"73.18 146.35 146.35 146.35 109.77 73.18 73.18 146.35"})))))}var Ye=n.forwardRef(He);a.p;function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ze(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function qe(e,t){var a=e.title,i=e.titleId,s=Ze(e,["title","titleId"]);return n.createElement("svg",Je({viewBox:"0 0 500 150",preserveAspectRatio:"none",style:{height:"100%",width:"100%"},ref:t,"aria-labelledby":i},s),a?n.createElement("title",{id:i},a):null,n.createElement("path",{d:"M0.00,49.98 C203.72,197.85 320.54,-27.15 500.00,49.98 L500.00,150.00 L0.00,150.00 Z",style:{stroke:"none",fill:"#4b3f72"}}))}var Ue=n.forwardRef(qe),$e=(a.p,a(96));a(379);function Ke(e){var t=e.link,a=e.title,n=e.children,i=e.className;return Object(x.jsx)(b.a,{xs:6,sm:4,className:"ml-auto mr-auto ".concat(i),children:Object(x.jsxs)("a",{className:"d-flex justify-content-center flex-wrap text-center",href:t,target:"_blank",rel:"noopener noreferrer",children:[n,Object(x.jsx)("div",{className:"w-100",children:Object(x.jsx)("h3",{className:"font-basic",children:a})})]})})}function Qe(e){var t=e.image,a=e.title,i=e.description,s=Object(n.useState)(!1),c=Object(u.a)(s,2),r=c[0],o=c[1],l=function(){return o(!1)},d=function(){return o(!0)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(j.a,{className:"model-card rounded",onClick:d,children:[Object(x.jsx)(j.a.Img,{src:t}),Object(x.jsxs)(j.a.Header,{className:"d-flex align-items-baseline justify-content-between h-100",children:[Object(x.jsx)("h3",{children:a}),Object(x.jsx)(j.a.Link,{onClick:d,children:"Details"})]})]}),Object(x.jsxs)(Pe.a,{show:r,size:"lg",onHide:l,children:[Object(x.jsx)(Pe.a.Header,{closeButton:!0,children:Object(x.jsxs)(Pe.a.Title,{children:[a," Model Details"]})}),Object(x.jsxs)(Pe.a.Body,{children:[Object(x.jsx)("img",{alt:"Schematic of the ".concat(a," model"),src:t,className:"float-left border model-card-image"}),Object(x.jsx)("p",{children:i})]}),Object(x.jsx)(Pe.a.Footer,{children:Object(x.jsx)(f.a,{variant:"secondary",onClick:l,children:"Close"})})]})]})}function Xe(){return Object(x.jsxs)("section",{id:"general-about",children:[Object(x.jsx)("h1",{children:"About This Work"}),Object(x.jsx)("p",{children:"Electoral systems can have a large impact on how voters are represented. One electoral system that has garnered attention the past few years is Ranked Choice Voting (RCV). This application aims to help users explore the impact RCV may have on representation."})," ",Object(x.jsxs)("p",{children:["Building off the models introduced by Benade, Buck, Duchin, Gold and Weighill in"," ",Object(x.jsx)("a",{href:"https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3778021",children:'"RCV and Minority Representation"'}),", this application exposes the inputs to those models in the form of a web application. By enabling a wide audience of users to see for themselves the impact RCV might have in the scenarios they craft, we hope to catalyze discussions about RCV's viability as a tool for diminishing voter dilution in minority populations."]})]})}function et(){return Object(x.jsxs)("section",{id:"models",children:[Object(x.jsx)("h1",{className:"mb-4",children:"RCV Model Details"}),Object(x.jsx)("p",{children:"There are four RCV models that this application leverages: Plackett-Luce, Bradley-Terry, Cambridge Sampler, & Alternating Crossover. All the models take some basic inputs, namely the support from each group for each class of candidate (green- or purple-preferred), which should be numbers between 0 and 1. These values can be estimated by analyzing single-winner elections, inferred from survey results, or set to hypothetical values. Each model interprets these support values slightly differently, as detailed below."}),Object(x.jsxs)(h.a,{noGutters:!0,className:"d-flex justify-around",id:"model-cards",children:[Object(x.jsx)(b.a,{sm:6,xs:12,className:"mt-4 pl-2 pr-2 d-flex justify-content-center",children:Object(x.jsx)(Qe,{title:"Plackett-Luce",description:$e.pldesc,image:Ge})}),Object(x.jsx)(b.a,{sm:6,xs:12,className:"mt-4 pl-2 pr-2 d-flex justify-content-center",children:Object(x.jsx)(Qe,{title:"Bradley-Terry",description:$e.btdesc,image:Ge})}),Object(x.jsx)(b.a,{sm:6,xs:12,className:"mt-4 pl-2 pr-2 d-flex justify-content-center",children:Object(x.jsx)(Qe,{title:"Cambridge Sampler",description:$e.csdesc,image:ze})}),Object(x.jsx)(b.a,{sm:6,xs:12,className:"mt-4 pl-2 pr-2 d-flex justify-content-center",children:Object(x.jsx)(Qe,{title:"Alternating Crossover",description:$e.acdesc,image:Ie})})]})]})}function tt(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{id:"wave-container",children:Object(x.jsx)(Ue,{})}),Object(x.jsxs)("section",{id:"learn-more",className:"text-center pb-4",children:[Object(x.jsx)("h1",{className:"mb-4",children:" Learn More "}),Object(x.jsx)("p",{className:"ml-4 mr-4 mb-5",children:"Still curious? Dive into our codebases on GitHub, where you can find all of our code published as open-source software. Let us know about bugs you encounter, features you'd like, and how you are using our RCV simulation application."}),Object(x.jsxs)(h.a,{className:"mt-4",children:[Object(x.jsx)(Ke,{link:"https://github.com/mggg/RCV_Basics",title:"RCV Model Backend",children:Object(x.jsx)(Be.a,{size:60})}),Object(x.jsx)(Ke,{link:"https://mggg.org/work",title:"MGGG Portfolio",children:Object(x.jsx)(Ye,{width:"150px",className:"pt-3 pb-3"})}),Object(x.jsx)(Ke,{link:"https://github.com/mggg/rcv-webapp",title:"RCV Webapp Frontend",children:Object(x.jsx)(Be.a,{size:60})})]})]})]})}var at=[{path:"/about",display:"About",component:function(){return Object(x.jsxs)(p.a,{id:"about-page",children:[Object(x.jsx)(Xe,{}),Object(x.jsx)("hr",{className:"mb-5 mt-5"}),Object(x.jsx)(et,{}),Object(x.jsx)(tt,{})]})}},{path:"/",isHome:"true",display:"Home",component:Le}];function nt(e){return e.find((function(e){return e.isHome})).path}var it=function(e){return Object(x.jsxs)(l.a,{className:"nav-header",variant:"dark",expand:"md",children:[Object(x.jsxs)(l.a.Brand,{as:r.b,to:nt(e.routes),className:"font-italic",children:["Modeling Representation ",Object(x.jsx)("br",{className:"d-xs-block d-sm-none"})," with Ranked Choice Voting"]}),Object(x.jsx)(l.a.Toggle,{}),Object(x.jsx)(l.a.Collapse,{className:"justify-content-end",children:Object(x.jsx)(d.a,{className:"justify-content-end",children:e.routes.reverse().map((function(e,t){return Object(x.jsx)(d.a.Item,{className:"text-right",children:Object(x.jsx)(d.a.Link,{as:r.b,to:e.path,href:e.path,children:e.display},t)},e.display)}))})})]})};var st=function(){return Object(x.jsxs)(r.a,{basename:"/",children:[Object(x.jsx)(it,{routes:at}),Object(x.jsx)(o.c,{children:at.map((function(e,t){return Object(x.jsx)(o.a,{path:e.path,children:Object(x.jsx)(e.component,{})},t)}))})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(st,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t){e.exports={pldesc:"\n  The Plackett-Luce model is a classical model of statistical ranking which has already been applied to study ranked choice voting in Ireland. Let's suppose the support for Candidate A from a voting group is twice the support for Candidate B. Under the Plackett-Luce model, we take this to mean that a voter is twice as likely to put Candidate A first as to put Candidate B first. In fact, the model assumes that this trend goes all the way down the ballot. That is, if a voter has not ranked either A or B yet on their ballot, then they are still twice as likely to write down Candidate A's name than Candidate B when they get to the next rank. See Critchlow, D.E., Fligner, M.A. and Verducci, J.S., 1991. Probability models on rankings. Journal of mathematical psychology, 35(3), pp.294-318 for mathematical details. It is unrealistic to expect the support for each class of candidates to be completely uniform, so to divide up the total support among candidates of a given class, we sample from a symmetric Dirichlet distribution. The Dirichlet distribution has one parameter (called concentration) which can be used to choose between mostly even division of support (concentration >> 1), and support concentrated on just a few candidates (concentration << 1). The default concentration value of 1.0 makes every division of the support equally likely, roughly speaking. We therefore refer to this parameter asevenness of support in the Model input tab.\n  ",btdesc:"\n  The paired comparison model is based on the idea that what matters in a ranking is who is preferred over whom. Suppose the support by a voting group for Candidate A is a and the support for Candidate B is b. This the model sets the probability that a voter in the group ranks Candidate A above Candidate B at a/(a+b). The probability of a full ranking is just the product of the probabilities associated with the order of each pair of candidates, with a normalizing constant so that everything sums to one. See  See Critchlow, D.E., Fligner, M.A. and Verducci, J.S., 1991. Probability models on rankings. Journal of mathematical psychology, 35(3), pp.294-318 for mathematical details. As with the Plackett-Luce model, we use a Dirichlet sampler to divide up the support among the candidates. The Dirichlet distribution has one parameter (called concentration) which can be used to choose between mostly even division of support (concentration >> 1), and support concentrated on just a few candidates (concentration << 1). The default concentration value of 1.0 makes every division of the support equally likely, roughly speaking. We therefore refer to this parameter asevenness of support in the Model input tab.\n  ",acdesc:"\n  This model posits that there are two kinds of voters in each group: block voters and crossover voters. Block voters always vote for ingroup candidates first and then outgroup candidates. Crossover voters alternate between the two classes of candidates, starting with an outgroup candidate (hence the name). This only tells you the type of candidate at each position in a ballot, however, so further choices are necessary to determine the exact order. For each group of voters and group of candidates, we allow two choices: random ordering by each voter, or consistent ordering by each voter. This model has been used in previous analyses of ranked voting by the MGGG at Tufts University (cf. MGGG, Election Reform in Lowell MA, https://mggg.org/lowell or MGGG, Analysis of county commission elections in Yakima County WA, https://mggg.org/uploads/yakima.pdf)\n  ",csdesc:"\n  Each voter's first choice under this model is the same as under alternating crossover, i.e. an ingroup candidate for block voters and an outgroup candidate for crossover voters. However, instead of allowing only a block ballot or alternating ballot, the types of candidates in the rest of the ballot are determined by sampling from the ballots in a decade's worth of Cambridge MA ranked choice city council elections. Once the type of candidate (ingroup or outgroup) at each rank has been chosen, random ordering or consistent ordering is applied to fill in the ballot with candidate names just as with the alternating crossover model.\n  "}}},[[382,1,2]]]);
//# sourceMappingURL=main.6e77f2c7.chunk.js.map